<!doctype html><html lang=en-gb><head prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#"><title>Deploying a static website to Azure Storage from AppVeyor | The blog of a software developer and tester.</title>
<meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta property="author" content="Martin Costello"><meta name=copyright content="&copy; Martin Costello 2014-2025"><meta name=description content="How to deploy a static website to an Azure Storage container from AppVeyor CI."><meta name=language content="en"><meta name=theme-color content="#ffffff"><meta name=keywords content="azure"><meta name=robots content="INDEX"><meta name=viewport content="width=device-width,initial-scale=1"><meta property="article:author" content="10100867762061905"><meta property="article:published_time" content="2018-06-30T00:00:00Z"><meta property="article:modified_time" content="2018-06-30T00:00:00Z"><meta property="article:tag" content="azure"><meta property="fb:profile_id" content="10100867762061905"><meta name=application-name content="Martin Costello's Blog"><meta name=msapplication-config content="browserconfig.xml"><meta name=msapplication-navbutton-color content="#0095DA"><meta name=msapplication-starturl content="/"><meta property="og:description" content="How to deploy a static website to an Azure Storage container from AppVeyor CI."><meta property="og:image" content="https://cdn.martincostello.com/martin_small-v3.png"><meta property="og:locale" content="en_GB"><meta property="og:site_name" content="Martin Costello's Blog"><meta property="og:title" content="Deploying a static website to Azure Storage from AppVeyor"><meta property="og:type" content="article"><meta property="og:updated_time" content="2018-06-30T00:00:00Z"><meta property="og:url" content="https://blog.martincostello.com/deploying-a-static-website-to-azure-storage-from-appveyor/"><meta name=twitter:card content="summary"><meta name=twitter:creator content="@martin_costello"><meta name=twitter:description content="How to deploy a static website to an Azure Storage container from AppVeyor CI."><meta name=twitter:domain content="blog.martincostello.com"><meta name=twitter:image content="https://cdn.martincostello.com/martin_small-v3.png"><meta name=twitter:image:alt content="Martin Costello"><meta name=twitter:site content="@martin_costello"><meta name=twitter:title content="Deploying a static website to Azure Storage from AppVeyor"><meta name=twitter:url content="https://blog.martincostello.com/deploying-a-static-website-to-azure-storage-from-appveyor/"><meta name=twitter:label1 content="Written by"><meta name=twitter:data1 content="Martin Costello"><meta name=google-site-verification content="ji6SNsPQEbNQmF252sQgQFswh-b6cDnNOa3AHvgo4J0"><meta name=msvalidate.01 content="D6C2E7551C902F1A396D8564C6452930"><link rel=canonical href=https://blog.martincostello.com/deploying-a-static-website-to-azure-storage-from-appveyor/><link rel=manifest href=/manifest.webmanifest><link href=https://cdn.martincostello.com/favicon.ico rel="shortcut icon" type=image/x-icon><link href=/sitemap.xml rel=sitemap type=application/xml><link href=/feed.xml rel=alternate type=application/rss+xml title=Atom></head><body><nav class="navbar navbar-expand-lg navbar-dark bg-primary"><div class=container><a href=/ class=navbar-brand><span class="fa-solid fa-laptop-code" aria-hidden=true></span>
blog.martincostello.com
</a><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#site-navbar aria-controls=site-navbar aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=site-navbar><ul class="navbar-nav me-auto"><li class=nav-item><a class=nav-link href=/archive/ title="View the post archive">Archive
<span class="fa-solid fa-box-archive" aria-hidden=true></span></a></li></ul><ul class=navbar-nav><li class=nav-item><a class=nav-link href=/about-me/ title="About Martin">About Me
<span class="fa-solid fa-circle-info" aria-hidden=true></span></a></li></ul></div></div></nav><main class="container body-content"><div class="p-4 mb-3 bg-light rounded-3"><div class="container-fluid py-3"><h1 class=display-5>Deploying a static website to Azure Storage from AppVeyor</h1><p class="col-md-8 fs-4 lead">How to deploy a static website to an Azure Storage container from AppVeyor CI.</p></div></div><p><div class="row d-none d-md-block"><div class=col-6>30 June 2018 by <a href=/about-me/ rel=noopener title="About Martin Costello">Martin Costello</a> |
<a href=/feed.xml rel=noopener title="View the RSS syndication feed"><span class="fa-solid fa-rss" aria-hidden=true></span></a></div></div><div class="row d-md-none"><div class=col-12>30 June 2018 by <a href=/about-me/ rel=noopener title="About Martin Costello">Martin Costello</a></div><div class=col-12><a href=/feed.xml rel=noopener title="View the RSS syndication feed"><span class="fa-solid fa-rss" aria-hidden=true></span></a></p></div></div></p><p><div class=row><div class=col-lg-6><a href="https://bsky.app/intent/compose?text=Deploying+a+static+website+to+Azure+Storage+from+AppVeyor+by+%40martincostello.com+-+https%3A%2F%2Fblog.martincostello.com%2Fdeploying-a-static-website-to-azure-storage-from-appveyor%2F" target=_blank rel=noopener class="btn btn-info btn-sm" title="Share on Bluesky">Share on Bluesky
<span class="fa-brands fa-bluesky" aria-hidden=true></span></a></div></div></p><p>This week the Azure storage team <a href=https://azure.microsoft.com/en-gb/blog/azure-storage-static-web-hosting-public-preview/ title="Static website hosting for Azure Storage now in public preview">finally announced</a> that Azure Storage now support hosting static websites. This has been a <a href=https://feedback.azure.com/forums/217298-storage/suggestions/6417741-static-website-hosting-in-azure-blob-storage title="Static website hosting in Azure blob storage">long-standing</a> request from users of Azure (for nearly 4 years), so it&rsquo;s great to see something now available for use, even if at the time of writing it&rsquo;s currently only in public preview.</p><p>I&rsquo;ve been hosting this blog in <a href=https://blog.martincostello.com/migrating-from-iis-to-s3/ title="Migrating to Amazon S3">AWS for almost a year now</a>, so I thought I&rsquo;d give the public preview a try and automate deployment with <a href=https://www.appveyor.com/ title="AppVeyor CI">AppVeyor</a> as well at the same time.</p><p>READMORE</p><p>Part of the primary reason this blog is hosted in AWS is because it wasn&rsquo;t possible to host the static site in Azure, which is my preferred cloud hosting provider for most of my infrastructure. But as that wasn&rsquo;t possible I went with S3 for content and AWS Lambda@Edge to handle IIS-style folders and custom HTTP response headers. You can read more about that in this blog post: <a href=https://blog.martincostello.com/migrating-from-iis-to-s3/ title="Migrating to Amazon S3">https://blog.martincostello.com/migrating-from-iis-to-s3/</a></p><p>I&rsquo;ve used AppVeyor to deploy content to Azure storage before as it&rsquo;s used to host my <a href=https://github.com/martincostello/cdn title="cdn on GitHub.com">CDN</a> where I store images and other content that this blog and some of my other sites use to reduce duplication, so I thought I&rsquo;d use that as a starting point for the implementation.</p><p>All-in it actually only took about 45 minutes to setup and configure, so it&rsquo;s surprisingly easy to start using. I just followed the Getting Started instructions in the announcement blog post and then <a href=https://github.com/martincostello/blog/pull/37 title="Deploy to Azure storage static website">opened a Pull Request</a> on my blog repo in GitHub to test it out.</p><p>The approximate steps to enable Azure static website hosting for this blog were:</p><ol><li>Create a new Azure Storage General Purpose v2 storage account.</li><li>Enable <em>Static website</em> to create the special <code>$web</code> container.</li><li>Set the file names to use as the index and error pages.</li><li>Enable the GitHub repo for <a href=https://ci.appveyor.com/project/martincostello/blog title="blog in AppVeyor CI">AppVeyor CI</a>.</li><li>Add an <a href=https://github.com/martincostello/blog/blob/main/appveyor.yml title="appveyor.yml on GitHub.com"><code>appveyor.yml</code></a> file to build the static site and upload the files to it.</li></ol><p><a href=https://ci.appveyor.com/project/martincostello/blog/build/8 title="First deployment">Here&rsquo;s the first AppVeyor build from my <code>deploy</code> branch</a> to upload the content from earlier today.</p><p>There&rsquo;s plenty of extra stuff I&rsquo;d need to do to migrate back from AWS to Azure once this comes out of public preview if I choose to move, but it&rsquo;s nice to see that the mechanics of uploading content are easy to get moving with. These extras include:</p><ul><li>Deleting content from the storage container no longer present in source.</li><li>Configuring a custom DNS hostname.</li><li>Fronting it with Azure CDN to support custom TLS certificates.</li><li>Configuring appropriate caching headers.</li><li>Configuring HTTP response headers for things like having a Content Security Policy to get an A+ rating in tools such as <a href=https://securityheaders.com/ title=securityheaders.io>securityheaders.io</a>.</li></ul><p>With that all set up, here&rsquo;s this blog post served from Azure storage: <a href=https://martincostelloblog.z33.web.core.windows.net/azure-static-websites-with-appveyor/ title="Blog from Azure Storage">https://martincostelloblog.z33.web.core.windows.net/azure-static-websites-with-appveyor/</a></p><p>Relatively painless and quick to turn around, this looks like a feature that will be useful for those with a strong preference for Windows Azure to keep their different types of infrastructure co-located (and leverage their Azure MSDN credits too).</p><p>Happy coding!</p><hr><p><div class=row><div class=col-lg-6><a href="https://bsky.app/intent/compose?text=Deploying+a+static+website+to+Azure+Storage+from+AppVeyor+by+%40martincostello.com+-+https%3A%2F%2Fblog.martincostello.com%2Fdeploying-a-static-website-to-azure-storage-from-appveyor%2F" target=_blank rel=noopener class="btn btn-info btn-sm" title="Share on Bluesky">Share on Bluesky
<span class="fa-brands fa-bluesky" aria-hidden=true></span></a></div></div></p><hr><footer><p><div class=row><div class="d-none d-md-block col">&copy; Martin Costello 2014-2025 |
Built from <a href=https://github.com/martincostello/blog/commit/1e081eee55dfb7b252dce3b0ab73a36513d14253 rel=noopener title="View commit 1e081eee55dfb7b252dce3b0ab73a36513d14253 on GitHub">1e081ee</a> on <a href=https://github.com/martincostello/blog/tree/copilot/fix-244 rel=noopener title="View branch copilot/fix-244 on GitHub">copilot/fix-244</a></div><div class=d-md-none><div class=col>&copy; Martin Costello 2014-2025</div></div></div></p></footer></main><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/bootswatch/5.3.7/flatly/bootstrap.min.css integrity="sha512-O+EA0Agf5+pB8u7CtnIAYq/BKyFPMT8c0DFjmqLyfIJJ9Fm8GBohV/0H0TFaZ96+jieN8zUVY4IkSBso9z6hpg==" crossorigin=anonymous referrerpolicy=no-referrer async><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin=anonymous referrerpolicy=no-referrer async><link rel=stylesheet href=/styles/site.css><script src=https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.7/js/bootstrap.bundle.min.js integrity="sha512-Tc0i+vRogmX4NN7tuLbQfBxa8JkfUSAxSFVzmU31nVdHyiHElPPy2cWfFacmCJKw0VqovrzKhdd2TSTMdAxp2g==" crossorigin=anonymous referrerpolicy=no-referrer></script><script src="https://www.googletagmanager.com/gtag/js?id=G-XJFV74HRL6" async></script><script>window.hugoSiteParams={render_analytics:!0,analytics_id:"G-XJFV74HRL6"}</script><script src=/scripts/site.js defer></script></body></html>
<!doctype html><html lang=en-gb><head prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#"><title>Upgrade to ASP.NET Core 2.1 for Productivity and Performance Gains | The blog of a software developer and tester.</title>
<meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta property="author" content="Martin Costello"><meta name=copyright content="&copy; Martin Costello 2014-2025"><meta name=description content="Upgrading to ASP.NET Core 2.1 can deliver serious performance improvements to your web applications as well as make you much more productive as a developer."><meta name=language content="en"><meta name=theme-color content="#ffffff"><meta name=keywords content="dotnet,aspnetcore,performance"><meta name=robots content="INDEX"><meta name=viewport content="width=device-width,initial-scale=1"><meta property="article:author" content="10100867762061905"><meta property="article:published_time" content="2018-06-23T00:00:00Z"><meta property="article:modified_time" content="2018-06-23T00:00:00Z"><meta property="article:tag" content="dotnet,aspnetcore,performance"><meta property="fb:profile_id" content="10100867762061905"><meta name=application-name content="Martin Costello's Blog"><meta name=msapplication-config content="browserconfig.xml"><meta name=msapplication-navbutton-color content="#0095DA"><meta name=msapplication-starturl content="/"><meta property="og:description" content="Upgrading to ASP.NET Core 2.1 can deliver serious performance improvements to your web applications as well as make you much more productive as a developer."><meta property="og:image" content="https://cdn.martincostello.com/martin_small-v3.png"><meta property="og:locale" content="en_GB"><meta property="og:site_name" content="Martin Costello's Blog"><meta property="og:title" content="Upgrade to ASP.NET Core 2.1 for Productivity and Performance Gains"><meta property="og:type" content="article"><meta property="og:updated_time" content="2018-06-23T00:00:00Z"><meta property="og:url" content="https://blog.martincostello.com/upgrade-to-asp.net-core-2.1-for-productivity-and-performance-gains/"><meta name=twitter:card content="summary"><meta name=twitter:creator content="@martin_costello"><meta name=twitter:description content="Upgrading to ASP.NET Core 2.1 can deliver serious performance improvements to your web applications as well as make you much more productive as a developer."><meta name=twitter:domain content="blog.martincostello.com"><meta name=twitter:image content="https://cdn.martincostello.com/martin_small-v3.png"><meta name=twitter:image:alt content="Martin Costello"><meta name=twitter:site content="@martin_costello"><meta name=twitter:title content="Upgrade to ASP.NET Core 2.1 for Productivity and Performance Gains"><meta name=twitter:url content="https://blog.martincostello.com/upgrade-to-asp.net-core-2.1-for-productivity-and-performance-gains/"><meta name=twitter:label1 content="Written by"><meta name=twitter:data1 content="Martin Costello"><meta name=google-site-verification content="ji6SNsPQEbNQmF252sQgQFswh-b6cDnNOa3AHvgo4J0"><meta name=msvalidate.01 content="D6C2E7551C902F1A396D8564C6452930"><link rel=canonical href=https://blog.martincostello.com/upgrade-to-asp.net-core-2.1-for-productivity-and-performance-gains/><link rel=manifest href=/manifest.webmanifest><link href=https://cdn.martincostello.com/favicon.ico rel="shortcut icon" type=image/x-icon><link href=/sitemap.xml rel=sitemap type=application/xml><link href=/feed.xml rel=alternate type=application/rss+xml title=Atom></head><body><nav class="navbar navbar-expand-lg navbar-dark bg-primary"><div class=container><a href=/ class=navbar-brand><span class="fa-solid fa-laptop-code" aria-hidden=true></span>
blog.martincostello.com
</a><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#site-navbar aria-controls=site-navbar aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=site-navbar><ul class="navbar-nav me-auto"><li class=nav-item><a class=nav-link href=/archive/ title="View the post archive">Archive
<span class="fa-solid fa-box-archive" aria-hidden=true></span></a></li></ul><ul class=navbar-nav><li class=nav-item><a class=nav-link href=/about-me/ title="About Martin">About Me
<span class="fa-solid fa-circle-info" aria-hidden=true></span></a></li></ul></div></div></nav><main class="container body-content"><div class="p-4 mb-3 bg-light rounded-3"><div class="container-fluid py-3"><h1 class=display-5>Upgrade to ASP.NET Core 2.1 for Productivity and Performance Gains</h1><p class="col-md-8 fs-4 lead">Upgrading to ASP.NET Core 2.1 can deliver serious performance improvements to your web applications as well as make you much more productive as a developer.</p></div></div><p><div class="row d-none d-md-block"><div class=col-6>23 June 2018 by <a href=/about-me/ rel=noopener title="About Martin Costello">Martin Costello</a> |
<a href=/feed.xml rel=noopener title="View the RSS syndication feed"><span class="fa-solid fa-rss" aria-hidden=true></span></a></div></div><div class="row d-md-none"><div class=col-12>23 June 2018 by <a href=/about-me/ rel=noopener title="About Martin Costello">Martin Costello</a></div><div class=col-12><a href=/feed.xml rel=noopener title="View the RSS syndication feed"><span class="fa-solid fa-rss" aria-hidden=true></span></a></p></div></div></p><p><div class=row><div class=col-lg-6><a href="https://bsky.app/intent/compose?text=Upgrade+to+ASP.NET+Core+2.1+for+Productivity+and+Performance+Gains+by+%40martincostello.com+-+https%3A%2F%2Fblog.martincostello.com%2Fupgrade-to-asp.net-core-2.1-for-productivity-and-performance-gains%2F" target=_blank rel=noopener class="btn btn-info btn-sm" title="Share on Bluesky">Share on Bluesky
<span class="fa-brands fa-bluesky" aria-hidden=true></span></a></div></div></p><p>I&rsquo;ve been using .NET Core since it was released <a href=https://blogs.msdn.microsoft.com/dotnet/2016/06/27/announcing-net-core-1-0/ title="Announcing .NET Core 1.0">back in June 2016</a> as my development technology of choice for my personal projects, as well as helping introduce it as a mainstream technology choice at <a href=https://www.just-eat.com/ title="Just Eat global website">Just Eat</a> (my employer at the time of writing).</p><p>I find it so much more pleasurable to code against compared to &ldquo;traditional&rdquo; ASP.NET. With features such as self-hosting, built-in dependency injection and a high level of testability, you can really focus on solving the domain problem at hand, rather than worrying too much over boilerplate and ceremony.</p><p>Each new release, both major and minor, brings something new to geek-out over, but ASP.NET Core 2.1 has been a particular stand-out so far for new features and benefits that I find really compelling as a software developer.</p><p>READMORE</p><p>In this blog post I&rsquo;m going to cover two aspects of software development ASP.NET Core 2.1 really helps with â€” <em>productivity</em> and <em>performance</em> â€” with some specific examples from my personal side projects as well as professionally at my day job.</p><p>Below are links to the two GitHub Pull Requests to the repositories for my personal websites to upgrade them to ASP.NET Core 2.1:</p><ul><li><a href=https://github.com/martincostello/website/pull/211 title="Update to ASP.NET Core 2.1">Update to ASP.NET Core 2.1</a> for martincostello.com</li><li><a href=https://github.com/martincostello/alexa-london-travel-site/pull/178 title="Migrate to ASP.NET Core 2.1">Migrate to ASP.NET Core 2.1</a> for londontravel.martincostello.com</li></ul><h2 id=productivity-improvements>Productivity Improvements</h2><p>Developers like to be productive. Whether that&rsquo;s writing code faster, using less keystrokes, or automating tests. We&rsquo;d all like to be coding and doing the parts of software development we enjoy, rather than the more mundane parts.</p><p>For me there&rsquo;s two new features in .NET Core 2.1 that really make the kind of software I generally work on, integrating applications with REST APIs, much easier to get on with than before. The first of these is <a href=https://github.com/aspnet/HttpClientFactory title="aspnet/HttpClientFactory on GitHub.com">HttpClientFactory</a>.</p><h3 id=httpclientfactory>HttpClientFactory</h3><p>HttpClientFactory provides a number of APIs that build on top of <code>HttpClient</code> to make it easier to solve common cross-cutting concerns for HTTP API integrations, such as configuration, resiliency and scalability.</p><p>The dependency injection extension methods make it easier to setup named <code>HttpClient</code> instances for your dependencies with appropriate configuration applied (base addresses, timeouts, request headers etc.). This can also be combined with typed clients, such as those provided by <a href=https://github.com/reactiveui/refit title="Refit on GitHub.com">Refit</a>, to let you abstract away a lot of the low-level interaction of HTTP APIs and get on with the business of writing integrations with your dependencies.</p><p>HttpClientFactory also ships an <a href=https://www.nuget.org/packages/Microsoft.Extensions.Http.Polly/ title="Microsoft.Extensions.Http.Polly on nuget.org">extensions library</a> that allow you to easily integrate <a href=https://github.com/App-vNext/Polly title="Polly on GitHub.com">Polly</a> into your HTTP requests to add behaviours such as retries for transient HTTP errors and circuit-breakers.</p><p>Another feature of HttpClientFactory is that it pools the underlying HTTP connections, meaning that system networking resources are managed for you, so your application gets the best performance it can by transparently re-using socket connections and handling things like DNS TTLs.</p><p>The builder configuration API it has also makes it easy to plug in additional behaviours, like <a href=https://github.com/justeat/httpclient-interception/tree/master/samples#httpclient-interception-samples title="httpclient-interception samples on GitHub.com">HTTP request interception</a> for use with integration tests.</p><p>Here&rsquo;s some links to GitHub Pull Requests where I&rsquo;ve updated some of the applications I maintain to use HttpClientFactory:</p><ul><li><a href=https://github.com/justeat/httpclient-interception/pull/23 title="Update sample to use ASP.NET Core 2.1 and HttpClientFactory for JustEat.HttpClientInterception">Update sample to use ASP.NET Core 2.1 and HttpClientFactory</a></li><li><a href=https://github.com/justeat/ApplePayJSSample/pull/27 title="Upgrade to ASP.NET Core 2.1 for Apple Pay JS Sample code">Upgrade to ASP.NET Core 2.1</a></li></ul><h3 id=webapplicationfactorylttgt>WebApplicationFactory&lt;T></h3><p>As I mentioned above, HttpClientFactory makes it easier to integration test your applications, but ASP.NET Core 2.1 ships with another new feature that makes it <em>even easier</em> to integration test ASP.NET Core applications than in previous releases.</p><p><code>WebApplicationFactory&lt;T></code>, which ships with the <a href=https://www.nuget.org/packages/Microsoft.AspNetCore.Mvc.Testing/ title="Microsoft.AspNetCore.Mvc.Testing on NuGet.org">Microsoft.AspNetCore.Mvc.Testing</a> NuGet package, provides a simple way to create a fixture to use in your integration tests that hosts your application in-memory. This allows you to integration test your MVC views and Razor pages without first deploying the application to a server like Kestrel or IIS.</p><p>You can even extend it to self-host your application on an HTTP or HTTPS port using Kestrel so you can run browser automation tests with technologies like <a href=https://github.com/SeleniumHQ/selenium title="Selenium on GitHub.com">Selenium</a>.</p><p>For my <a href=https://www.amazon.co.uk/dp/B01NB0T86R title="London Travel on amazon.co.uk">London Travel Alexa skill&rsquo;s</a> <a href=https://londontravel.martincostello.com/ title="London Travel companion website">companion website</a>, I combined both HttpClientFactory&rsquo;s ability to configure interception of HTTP requests with self-hosting with <code>WebApplicationFactory&lt;T></code> to add browser integration tests for the OAuth identity integration for user accounts.</p><p>You can see the changes made to achieve this in <a href=https://github.com/martincostello/alexa-london-travel-site/pull/186 title="Integrate HttpClientFactory for my Alexa skill companion website">this Pull Request</a>. This PR increased the overall code coverage of the test suite by nearly 7%.</p><h2 id=performance-improvements>Performance Improvements</h2><p>Developer productivity increases are great because they make it easier for you to get on with writing software. The benefit to your users is less tangible though, with the gains mainly being with accelerating your work so you can deliver value to users at an increased pace.</p><p>Performance improvements on the other hand are a win for both the developer of an application as well as its users. Your users get an improved experience with benefits such as faster page load times, but as an application developer and maintainer you get the benefit of more bang-for-your-buck from your hardware.</p><p>This can translate into real tangible benefits such as reduced hosting costs if you host in the cloud, such as in Microsoft Azure or Amazon Web Services, as you can serve more requests for the same level of service provisioning.</p><p>In practice this could mean that as your application&rsquo;s usage increases you can scale out later, or for a constant level of load you could maybe scale down and reduce your instance sizes. Either scenario could result in a reduction in your monthly hosting bills.</p><p>Microsoft and the .NET community have really, <em>really</em> put a focus into performance for ASP.NET Core 2.1. In fact, I&rsquo;ll let this tweet speak for itself from when I updated my website to ASP.NET Core 2.1 on the 31st of May after it was released.</p><blockquote class=twitter-tweet data-lang=en><p lang=en dir=ltr>Spot where I upgraded my website to <a href="https://twitter.com/hashtag/AspNetCore?src=hash&amp;ref_src=twsrc%5Etfw">#AspNetCore</a> 2.1 yesterday: <a href=https://t.co/m0rRgNL6G9>pic.twitter.com/m0rRgNL6G9</a></p>&mdash; Martin Costello (@martin_costello) <a href="https://twitter.com/martin_costello/status/1002463054511136768?ref_src=twsrc%5Etfw">June 1, 2018</a></blockquote><script async src=https://platform.twitter.com/widgets.js></script><p>That&rsquo;s quite the cliff of a response time improvement isn&rsquo;t it?</p><p>I&rsquo;ve been surprised by the amount of attention this quick tweet gathered, with it even popping up in the <a href="https://youtu.be/LCV-JNOkZC4?t=15m16s" title="ASP.NET Community Standup - June 5, 2018 - ASP.NET Core 2.1 Release Party @15:16">ASP.NET Community Standup</a> and the results of <a href=https://www.techempower.com/blog/2018/06/06/framework-benchmarks-round-16/ title="
June 6, 2018
Framework Benchmarks Round 16">round 16 the TechEmpower benchmarks</a>.</p><p>Of course, improving the response times of the simple MVC application for my personal website isn&rsquo;t exactly a real-world example of an application under user load is it? The proof of the pudding is in the eating, so we updated two ASP.NET Core applications I maintain at work from 2.0 to 2.1 the week after, and the numbers involved there were just as impressive.</p><blockquote class=twitter-tweet data-conversation=none data-lang=en><p lang=en dir=ltr>"So what about a real production application" I hear some of you ask? Well, here's some charts from UK production on Sunday evening for a <a href="https://twitter.com/aspnet?ref_src=twsrc%5Etfw">@aspnet</a> Core 2.1 web application and a 2.1 API application that it depends on.<br>TL;DR: Razor page rendering 43% faster, API 24% faster ðŸš€ <a href=https://t.co/KubMSxnLLF>pic.twitter.com/KubMSxnLLF</a></p>&mdash; Martin Costello (@martin_costello) <a href="https://twitter.com/martin_costello/status/1006177524848713728?ref_src=twsrc%5Etfw">June 11, 2018</a></blockquote><script async src=https://platform.twitter.com/widgets.js></script><p>Yes, you read that correctly. It improved the performance of an MVC web application by <strong>43%</strong>! Considering the changes were more-or-less just a framework upgrade (plus some new usage of HttpClientFactory), that&rsquo;s a tremendous improvement for the amount of development work put in to do the upgrade.</p><p>You can read more about the performance improvements in these two applications and how the metrics were collected in my post here: <a href=https://blog.martincostello.com/aspnet-core-21-supercharging-our-applications/ title="ASP.NET Core 2.1 â€“ Supercharging Our Applications">ASP.NET Core 2.1 â€“ Supercharging Our Applications ðŸš€</a></p><p>It was nice to see good feedback from members of the .NET community on the blog post as well, including from <a href=https://twitter.com/ben_a_adams title="Ben Adams on Twitter">Ben Adams</a> of Illyriad, who is quite a prolific contributor to .NET Core for performance gains.</p><blockquote class=twitter-tweet data-lang=en><p lang=en dir=ltr>Nice to see <a href="https://twitter.com/justeat_tech?ref_src=twsrc%5Etfw">@justeat_tech</a> and their customers (myself included) getting great performance benefits from <a href="https://twitter.com/hashtag/aspnetcore?src=hash&amp;ref_src=twsrc%5Etfw">#aspnetcore</a> 2.1; because <a href="https://twitter.com/hashtag/perfmatters?src=hash&amp;ref_src=twsrc%5Etfw">#perfmatters</a> <a href=https://t.co/mz8gpekQYO>https://t.co/mz8gpekQYO</a> <a href=https://t.co/btT44mUW7x>pic.twitter.com/btT44mUW7x</a></p>&mdash; Ben Adams (@ben_a_adams) <a href="https://twitter.com/ben_a_adams/status/1009158831732125697?ref_src=twsrc%5Etfw">June 19, 2018</a></blockquote><script async src=https://platform.twitter.com/widgets.js></script><h2 id=conclusion>Conclusion</h2><p>Microsoft and the open source community have really delivered a great release with ASP.NET Core 2.1, with <a href=https://github.com/dotnet/core/blob/master/release-notes/2.1/2.1.0.md title=".NET Core 2.1 Release Notes on GitHub.com">tonnes of new features and improvements</a>, of which I&rsquo;ve just touched the surface with a couple of my favourites.</p><p>Performance is the hero of .NET Core 2.1 though, so if you maintain any ASP.NET Core applications, I&rsquo;d strongly recommend that you upgrade to 2.1 as soon as you can to really supercharge your applications and make yourself, and your users, happier for it.</p><p>Here&rsquo;s to ASP.NET Core 2.2 and beyond! ðŸš€</p><hr><p><div class=row><div class=col-lg-6><a href="https://bsky.app/intent/compose?text=Upgrade+to+ASP.NET+Core+2.1+for+Productivity+and+Performance+Gains+by+%40martincostello.com+-+https%3A%2F%2Fblog.martincostello.com%2Fupgrade-to-asp.net-core-2.1-for-productivity-and-performance-gains%2F" target=_blank rel=noopener class="btn btn-info btn-sm" title="Share on Bluesky">Share on Bluesky
<span class="fa-brands fa-bluesky" aria-hidden=true></span></a></div></div></p><hr><footer><p><div class=row><div class="d-none d-md-block col">&copy; Martin Costello 2014-2025 |
Built from <a href=https://github.com/martincostello/blog/commit/1e081eee55dfb7b252dce3b0ab73a36513d14253 rel=noopener title="View commit 1e081eee55dfb7b252dce3b0ab73a36513d14253 on GitHub">1e081ee</a> on <a href=https://github.com/martincostello/blog/tree/copilot/fix-244 rel=noopener title="View branch copilot/fix-244 on GitHub">copilot/fix-244</a></div><div class=d-md-none><div class=col>&copy; Martin Costello 2014-2025</div></div></div></p></footer></main><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/bootswatch/5.3.7/flatly/bootstrap.min.css integrity="sha512-O+EA0Agf5+pB8u7CtnIAYq/BKyFPMT8c0DFjmqLyfIJJ9Fm8GBohV/0H0TFaZ96+jieN8zUVY4IkSBso9z6hpg==" crossorigin=anonymous referrerpolicy=no-referrer async><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin=anonymous referrerpolicy=no-referrer async><link rel=stylesheet href=/styles/site.css><script src=https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.7/js/bootstrap.bundle.min.js integrity="sha512-Tc0i+vRogmX4NN7tuLbQfBxa8JkfUSAxSFVzmU31nVdHyiHElPPy2cWfFacmCJKw0VqovrzKhdd2TSTMdAxp2g==" crossorigin=anonymous referrerpolicy=no-referrer></script><script src="https://www.googletagmanager.com/gtag/js?id=G-XJFV74HRL6" async></script><script>window.hugoSiteParams={render_analytics:!0,analytics_id:"G-XJFV74HRL6"}</script><script src=/scripts/site.js defer></script></body></html>
<!doctype html><html lang=en-gb><head prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#"><title>Writing Logs to xunit Test Output | The blog of a software developer and tester.</title>
<meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta property="author" content="Martin Costello"><meta name=copyright content="&copy; Martin Costello 2014-2025"><meta name=description content="How to write the logs from your xunit tests to the test output."><meta name=language content="en"><meta name=theme-color content="#ffffff"><meta name=keywords content="logging,testing,xunit"><meta name=robots content="INDEX"><meta name=viewport content="width=device-width,initial-scale=1"><meta property="article:author" content="10100867762061905"><meta property="article:published_time" content="2018-09-30T00:00:00Z"><meta property="article:modified_time" content="2018-09-30T00:00:00Z"><meta property="article:tag" content="logging,testing,xunit"><meta property="fb:profile_id" content="10100867762061905"><meta name=application-name content="Martin Costello's Blog"><meta name=msapplication-config content="browserconfig.xml"><meta name=msapplication-navbutton-color content="#0095DA"><meta name=msapplication-starturl content="/"><meta property="og:description" content="How to write the logs from your xunit tests to the test output."><meta property="og:image" content="https://cdn.martincostello.com/martin_small-v3.png"><meta property="og:locale" content="en_GB"><meta property="og:site_name" content="Martin Costello's Blog"><meta property="og:title" content="Writing Logs to xunit Test Output"><meta property="og:type" content="article"><meta property="og:updated_time" content="2018-09-30T00:00:00Z"><meta property="og:url" content="https://blog.martincostello.com/writing-logs-to-xunit-test-output/"><meta name=twitter:card content="summary"><meta name=twitter:creator content="@martin_costello"><meta name=twitter:description content="How to write the logs from your xunit tests to the test output."><meta name=twitter:domain content="blog.martincostello.com"><meta name=twitter:image content="https://cdn.martincostello.com/martin_small-v3.png"><meta name=twitter:image:alt content="Martin Costello"><meta name=twitter:site content="@martin_costello"><meta name=twitter:title content="Writing Logs to xunit Test Output"><meta name=twitter:url content="https://blog.martincostello.com/writing-logs-to-xunit-test-output/"><meta name=twitter:label1 content="Written by"><meta name=twitter:data1 content="Martin Costello"><meta name=google-site-verification content="ji6SNsPQEbNQmF252sQgQFswh-b6cDnNOa3AHvgo4J0"><meta name=msvalidate.01 content="D6C2E7551C902F1A396D8564C6452930"><link rel=canonical href=https://blog.martincostello.com/writing-logs-to-xunit-test-output/><link rel=manifest href=/manifest.webmanifest><link href=https://cdn.martincostello.com/favicon.ico rel="shortcut icon" type=image/x-icon><link href=/sitemap.xml rel=sitemap type=application/xml><link href=/feed.xml rel=alternate type=application/rss+xml title=Atom></head><body><nav class="navbar navbar-expand-lg navbar-dark bg-primary"><div class=container><a href=/ class=navbar-brand><span class="fa-solid fa-laptop-code" aria-hidden=true></span>
blog.martincostello.com
</a><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#site-navbar aria-controls=site-navbar aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=site-navbar><ul class="navbar-nav me-auto"><li class=nav-item><a class=nav-link href=/archive/ title="View the post archive">Archive
<span class="fa-solid fa-box-archive" aria-hidden=true></span></a></li></ul><ul class=navbar-nav><li class=nav-item><a class=nav-link href=/about-me/ title="About Martin">About Me
<span class="fa-solid fa-circle-info" aria-hidden=true></span></a></li></ul></div></div></nav><main class="container body-content"><div class="p-4 mb-3 bg-light rounded-3"><div class="container-fluid py-3"><h1 class=display-5>Writing Logs to xunit Test Output</h1><p class="col-md-8 fs-4 lead">How to write the logs from your xunit tests to the test output.</p></div></div><p><div class="row d-none d-md-block"><div class=col-6>30 September 2018 by <a href=/about-me/ rel=noopener title="About Martin Costello">Martin Costello</a> |
<a href=/feed.xml rel=noopener title="View the RSS syndication feed"><span class="fa-solid fa-rss" aria-hidden=true></span></a></div></div><div class="row d-md-none"><div class=col-12>30 September 2018 by <a href=/about-me/ rel=noopener title="About Martin Costello">Martin Costello</a></div><div class=col-12><a href=/feed.xml rel=noopener title="View the RSS syndication feed"><span class="fa-solid fa-rss" aria-hidden=true></span></a></p></div></div></p><p><div class=row><div class=col-lg-6><a href="https://bsky.app/intent/compose?text=Writing+Logs+to+xunit+Test+Output+by+%40martincostello.com+-+https%3A%2F%2Fblog.martincostello.com%2Fwriting-logs-to-xunit-test-output%2F" target=_blank rel=noopener class="btn btn-info btn-sm" title="Share on Bluesky">Share on Bluesky
<span class="fa-brands fa-bluesky" aria-hidden=true></span></a></div></div></p><p>Today I&rsquo;ve published a NuGet package that simplifies the mechanics of writing logs to the test output for xunit tests, <code>MartinCostello.Logging.XUnit</code> v0.1.0. It&rsquo;s open-source with an Apache 2.0 licence and available on GitHub.</p><ul><li><a href=https://www.nuget.org/packages/MartinCostello.Logging.XUnit/ title="MartinCostello.Logging.XUnit on NuGet.org">NuGet package</a></li><li><a href=https://github.com/martincostello/xunit-logging title="MartinCostello.Logging.XUnit on GitHub.com">GitHub repository</a></li></ul><p>Pull Requests and questions are welcome over on GitHub - I hope you find it useful!</p><p>READMORE</p><h2 id=rationale>Rationale</h2><p>If you&rsquo;re a .NET/C# developer, it&rsquo;s quite likely (I hope!) that you write and run a lot of unit and integration tests for the applications you work on as part of your day-to-day job. There&rsquo;s also a good chance if you&rsquo;re working on a new or recently created application that you&rsquo;re using <a href=https://dot.net title=".NET Core website">.NET Core</a> and <a href=https://xunit.github.io/ title="xUnit.net website">xunit</a> to code the application and do your automated testing.</p><p>When tests (particularly integration/functional tests) fail, sometimes it can be difficult to trace what&rsquo;s gone wrong. For example, in an integration test where you treat the application as a <a href=https://en.wikipedia.org/wiki/Black-box_testing title="Black-box testing on Wikipedia"><em>black box</em></a> and call through the public interfaces (web pages, HTTP endpoints etc.), the failing assertion might be just an HTTP 500 error saying that something&rsquo;s gone wrong. While that might be the correct public-facing behaviour for the application when it experiences a failure, that doesn&rsquo;t make it particularly easy for you as a developer to determine <em>why</em> the test failed so you can fix it.</p><p>Now there&rsquo;s probably some logging in your application that catch exceptions and log them, but these aren&rsquo;t usually readily available in the test results in situations like these, with you needing to debug the application to find the source of the test failure. In continuous integration environments this can be even more difficult, with it not easy to debug tests or collect logs.</p><p>I&rsquo;ve had this problem in .NET Core applications I&rsquo;ve worked on, and I found myself writing boring, duplicated boilerplate code to handle bridging the application&rsquo;s logs to xunit for easier test failure analysis again and again. Eventually I decided I should stop repeating myself and make a library to make it easy to light-up this kind of functionality in my tests and make my life a little easier and more efficient.</p><h2 id=solution>Solution</h2><p><a href=https://www.nuget.org/packages/MartinCostello.Logging.XUnit/ title="MartinCostello.Logging.XUnit on NuGet.org"><code>MartinCostello.Logging.XUnit</code></a> is based purely on my own use-cases for testing and the functionality is quite simple, so the first version is being published as a <code>0.1.0</code> rather than a <code>1.0.0</code>, but it&rsquo;s stable and has been dog-fooded in a number applications I work on for my job (<a href=https://tech.just-eat.com/2018/06/14/aspnet-core-21-supercharging-our-applications/ title="ASP.NET Core 2.1 – Supercharging Our Applications">ASP.NET Core 2.1 – Supercharging Our Applications</a>), as well as in my own personal projects, such as <a href=https://github.com/martincostello/sqllocaldb title="SQL LocalDB Wrapper on GitHub.com">SQL LocalDB Wrapper</a> and Alexa London Travel&rsquo;s <a href=https://github.com/martincostello/alexa-london-travel-site title="alexa-london-travel-site on GitHub.com">website</a>.</p><p>Here&rsquo;s an example of using it to create an <code>ILogger&lt;T></code> for a class being tested with xunit:</p><pre tabindex=0><code>using System;
using Microsoft.Extensions.DependencyInjection;
using Microsoft.Extensions.Logging;
using Xunit;
using Xunit.Abstractions;

namespace MyApp.Calculator;

public class CalculatorTests
{
    // Pass ITestOutputHelper into the test class, which xunit provides per-test
    public CalculatorTests(ITestOutputHelper outputHelper)
    {
        OutputHelper = outputHelper;
    }

    private ITestOutputHelper OutputHelper { get; }

    [Fact]
    public void Calculator_Sums_Two_Integers()
    {
        // Arrange - Create a service collection and call AddXunit()
        // on the logging builder to register it as a logging provider.
        var services = new ServiceCollection()
            .AddLogging((builder) =&gt; builder.AddXUnit(OutputHelper))
            .AddSingleton&lt;Calculator&gt;();

        // Get the system-under-test (the Calculator) from the service collection.
        // This will be created with a logger that routes to the xunit test output.
        var calculator = services
            .BuildServiceProvider()
            .GetRequiredService&lt;Calculator&gt;();

        // Act
        int actual = calculator.Sum(1, 2);

        // Assert
        Assert.AreEqual(3, actual);
    }
}

public sealed class Calculator
{
    private readonly ILogger _logger;

    public Calculator(ILogger&lt;Calculator&gt; logger)
    {
        _logger = logger;
    }

    public int Sum(int x, int y)
    {
        int sum = x + y;

        _logger.LogInformation(&#34;The sum of {x} and {y} is {sum}.&#34;, x, y, sum);

        return sum;
    }
}
</code></pre><p>As you can see below, the logging output is available in the test results in Visual Studio. If the test were to fail, the output would also be written to the console, such as to diagnose a failing test running in <a href=https://www.appveyor.com/ title="AppVeyor website">AppVeyor</a>.</p><img class="img-fluid mx-auto d-block" src=https://cdn.martincostello.com/xunit-logging-vs-test-output.png alt="Test output in Visual Studio" title="Test output in Visual Studio"><p>There&rsquo;s also an example of registering the logger for a self-hosted ASP.NET Core application using <code>WebApplicationFactory&lt;T></code> for functional tests in the <a href=https://github.com/martincostello/xunit-logging/blob/c83d15591df4b5b31f2b40ee43d9b67cf8d628d5/tests/Logging.XUnit.Tests/Integration/HttpApplicationTests.cs title="Example HTTP integration tests">sample integration tests</a> in the library&rsquo;s own test project using a sample application.</p><p>Further real usage of the library for both a library and an ASP.NET Core application are available for reference in the GitHub repositories linked to below:</p><ul><li><a href=https://github.com/martincostello/sqllocaldb/blob/fc3cd5d8539b5c8bb9d86896f0a2eae37ab6fa24/samples/TodoApp.Tests/TodoRepositoryTests.cs title="martincostello/sqllocaldb sample tests on GitHub.com">martincostello/sqllocaldb</a></li><li><a href=https://github.com/martincostello/alexa-london-travel-site/tree/c43c297d903c04196cc8eb66caf70b1cb32aef25/tests/LondonTravel.Site.Tests/Integration title="martincostello/alexa-london-travel-site integration tests on GitHub.com">martincostello/alexa-london-travel-site</a></li></ul><hr><p><div class=row><div class=col-lg-6><a href="https://bsky.app/intent/compose?text=Writing+Logs+to+xunit+Test+Output+by+%40martincostello.com+-+https%3A%2F%2Fblog.martincostello.com%2Fwriting-logs-to-xunit-test-output%2F" target=_blank rel=noopener class="btn btn-info btn-sm" title="Share on Bluesky">Share on Bluesky
<span class="fa-brands fa-bluesky" aria-hidden=true></span></a></div></div></p><hr><footer><p><div class=row><div class="d-none d-md-block col">&copy; Martin Costello 2014-2025 |
Built from <a href=https://github.com/martincostello/blog/commit/main rel=noopener title="View commit main on GitHub">main</a> on <a href=https://github.com/martincostello/blog/tree/main rel=noopener title="View branch main on GitHub">main</a></div><div class=d-md-none><div class=col>&copy; Martin Costello 2014-2025</div></div></div></p></footer></main><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/bootswatch/5.3.7/flatly/bootstrap.min.css integrity="sha512-O+EA0Agf5+pB8u7CtnIAYq/BKyFPMT8c0DFjmqLyfIJJ9Fm8GBohV/0H0TFaZ96+jieN8zUVY4IkSBso9z6hpg==" crossorigin=anonymous referrerpolicy=no-referrer async><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin=anonymous referrerpolicy=no-referrer async><link rel=stylesheet href=/styles/site.css><script src=https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.7/js/bootstrap.bundle.min.js integrity="sha512-Tc0i+vRogmX4NN7tuLbQfBxa8JkfUSAxSFVzmU31nVdHyiHElPPy2cWfFacmCJKw0VqovrzKhdd2TSTMdAxp2g==" crossorigin=anonymous referrerpolicy=no-referrer></script><script src="https://www.googletagmanager.com/gtag/js?id=G-XJFV74HRL6" async></script><script>window.hugoSiteParams={render_analytics:!0,analytics_id:"G-XJFV74HRL6"}</script><script src=/scripts/site.js defer></script></body></html>